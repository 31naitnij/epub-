# AI EPUB 电子书翻译工具

这是一个调用大模型API的 **EPUB 电子书翻译工具**。能够在翻译时实现**100% 保留原书的排版、插图和样式**。

---

## ✨ 特征

- **排版零损坏**：通过特殊符号作为锚点，提取文本再插入，实现只翻译文字，保持图片、字体、表格、排版布局完全不变。
- **分块与分组**：将文本按照段落分块，再按照设定的“分块大小”将若干块合并发送，增加整体性。
- **多轮对话**：可以设置1-5伦次翻译结果，将前次的结果作为当前翻译的参考，增加连贯性。
- **断点续傳**：过程设置了缓存，支持断点续传。

---

## 🚀 使用说明

### 方式一：直接下载使用（推荐）
前往本仓库的 **[Releases](https://github.com/31naitnij/AI-EPUB-Translator/releases)** 页面。

### 方式二：通过代码运行
如果你想体验最新功能或进行修改，可以按以下步骤运行：

#### **Windows 系统：**
- 双击文件夹里的 **`run.bat`**。它会自动帮你准备环境并启动。

#### **macOS / Linux 系统：**
1. 打开“终端 (Terminal)”。
2. 进入本项目文件夹，输入以下命令并回车：
   ```bash
   bash run.sh
   ```

---

### 方式三：自己打包成软件 (EXE/APP)
如果你想把源代码打包成一个独立的软件，可以使用我们提供的脚本：

- **Windows 用户**：双击 **`build_exe.bat`**。完成后，软件会出现在 `dist` 文件夹里。
- **macOS 用户**：在终端运行 `bash build_macos.sh`。

---

## 🛠 翻译具体步骤
成功运行后，会出现UI界面：
1. **选择书籍**：点击“选择文件”，找到你想翻译的 `.epub` 电子书。
2. **指定目录**：选择缓存和输出文件夹，建议固定在一个位置。
3. **填入 API 信息**：填写你的 AI Key和URL、模型名，这需要参考你调用的大模型API文档，设置合适的温度值，越严谨的文档温度值越低，建议在0-1之间。
4. **划分段落**：设置分块字符数，并点击 **“分块并分组”**，软件会根据设定值分块，预备发送给AI。根据模型能力，建议不要过大，2000以内。
5. **设置提示词**：因为设置了锚点符号，需要在提示词里提醒AI注意保留这些符号和格式。下面提供了提示词参考。
6. **开始翻译**：点击 **“开始翻译”**。你会看到右侧进度不断增加。
7. **导出书籍**：翻译完成后，点击 **“导出”**。一本翻译好的新书就会出现在你的文件夹里！

---

## 💡 小提示

- **导出失败**：如果在点击“导出”时报错，通常是因为你正在用阅读器（如微信读书查看器、Calibre、Apple Books）打开那本生成的文件。请**关闭阅读器**后再试。
- **分块大小不满意**：需要点击“清除缓存”再重新分块并分组。

---

## 🔍 关于翻译中出现的特殊符号

在翻译过程中，你会在原文和译文框里看到一些奇怪的符号（如 `⟬⟭`, `⦗1⦘`, `⟦ ⟧` 等），请**不要删除或修改它们**：

- **它们是什么？**：这些是给 AI 看的“定位锚点”。它们代表了书中的加粗、倾斜、链接、换行或图片等格式信息。
- **为什么要用它？**：有了这些符号，AI 就能知道哪里需要保留原有的格式，从而保证翻译后的排版和原书一模一样。
- **导出会出现在书里吗？**：**绝对不会**。在最后点击“导出”时，软件会自动把这些符号变回原来的精美排版，你在手机或 Kindel 上看书时是看不到这些符号的。

---

# 📝 提示词示例

## 角色和工作
你是一位精通多语言的资深翻译专家，专业处理各类文本翻译。你要将给定文本中的英文翻译为中文，遵循以下规则：

### 1. 术语与风格
- 术语统一，使用领域通用译名
- 译文准确严谨，符合中文表达习惯
- 保留原文非英文词汇
- 保留学术缩写和专有名词

### 2. 标记处理（绝对禁止修改）
**容器标记：** ⟬ ⟭ （保持完整）
**块分隔符：** ⧖ ⧗ ⧘ ⧙ （成对出现，严禁替换）
**内部锚点：** ⟦文字⟧⦗n⦘ （只翻译⟦ ⟧内的文字，保留⦗n⦘编号）

### 3. 输出要求
- 直接从 ⟬ 开始输出，到 ⟭ 结束
- 不添加任何自我介绍或说明文字
- 不添加Markdown代码块或其他格式
- 输出纯净翻译结果

## 示例
**原文：** ⟬ ⧖Under the provisions of the ⟦Research Collaboration Agreement⟧⦗1⦘...⧖ ⟭  
**译文：** ⟬ ⧖根据⟦研究合作协议⟧⦗1⦘的规定……⧖ ⟭

**开始翻译以下内容：**



---
> [!NOTE]
> 本工具目前仅支持 `.epub` 格式。如果你手头是 PDF 或 Word，建议先使用 Calibre 等工具转换成 EPUB 再进行翻译。
